<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-title" content="CapacitiumX">

    <title>CAPACITIUMX | COMMAND CENTER</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230d6efd'/><text y='.75em' x='5' font-family='Arial' font-weight='bold' font-size='70' fill='white'>C</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230d6efd'/><text y='.75em' x='5' font-family='Arial' font-weight='bold' font-size='70' fill='white'>C</text></svg>">

    <script>
        const myManifest = {
            "name": "CapacitiumX Command Center",
            "short_name": "CapacitiumX",
            "start_url": ".",
            "display": "standalone",
            "orientation": "any",
            "background_color": "#121212",
            "theme_color": "#0d6efd",
            "icons": [{
                "src": "https://cdn-icons-png.flaticon.com/512/906/906343.png",
                "sizes": "512x512",
                "type": "image/png",
                "purpose": "any maskable"
            }]
        };
        const blob = new Blob([JSON.stringify(myManifest)], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blob);
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestURL;
        document.head.appendChild(link);
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --bg: #121212;
            --card-bg: #1e1e1e;
            --text: #e0e0e0;
            --accent: #0d6efd; 
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 { text-align: center; color: white; margin-top: 40px; letter-spacing: 2px; }
        .subtitle { text-align: center; color: var(--accent); margin-bottom: 30px; font-weight: bold; }

        /* BUSCADOR */
        .search-hero {
            background: #252525; padding: 20px; border-radius: 15px;
            text-align: center; margin-bottom: 30px; border: 1px solid #333;
        }
        .hero-input {
            width: 90%; max-width: 500px; padding: 12px; font-size: 1rem;
            background: #111; border: 2px solid #444; color: white;
            border-radius: 8px; text-align: center;
        }

        .section-header {
            border-left: 4px solid var(--accent); padding-left: 15px;
            margin: 40px 0 20px 0; color: #fff; font-size: 1rem;
            text-transform: uppercase; font-weight: bold;
        }

        /* GRID RESPONSIVO */
        .app-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); 
            gap: 12px;
        }

        @media (max-width: 600px) {
            .app-grid { grid-template-columns: repeat(3, 1fr); }
        }

        .app-card {
            background: var(--card-bg); border: 1px solid #333; border-radius: 15px;
            padding: 15px 5px; text-align: center; cursor: pointer;
            transition: 0.2s; display: flex; flex-direction: column;
            align-items: center; justify-content: center; height: 100px;
            text-decoration: none; color: inherit;
        }
        .app-card:hover { transform: scale(1.05); background: #252525; border-color: var(--accent); }
        .app-card .icon { font-size: 1.8rem; margin-bottom: 5px; }
        .app-card .title { font-size: 0.75rem; font-weight: 500; }

        /* VISTAS MODULARES */
        .app-view { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .app-view.active { display: block; }
        .btn-back {
            background: #333; color: white; padding: 10px 20px; border-radius: 10px;
            border: none; cursor: pointer; margin-bottom: 20px;
        }

        /* FACTURADOR INTERNO */
        .box { background: #1a1a1a; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #333; }
        .data-section { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .data-section { grid-template-columns: 1fr; } }
        
        input, select { 
            width: 100%; padding: 12px; background: #252525; border: 1px solid #444; 
            color: white; border-radius: 8px; margin-bottom: 10px; box-sizing: border-box; 
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* IMPRESI√ìN */
        @media print {
            .print-hidden { display: none !important; }
            body { background: white !important; color: black !important; padding: 1cm; }
            .box { border: 1px solid #eee !important; background: white !important; color: black !important; }
            input { color: black !important; border: none !important; border-bottom: 1px solid #ddd !important; background: transparent !important; }
        }
    </style>
</head>
<body>

    <div class="container print-hidden" id="main-ui">
        <div id="main-menu" class="app-view active">
            <h1>CAPACITIUMX</h1>
            <div class="subtitle">SISTEMA INTEGRADO DE GESTI√ìN</div>

            <div class="search-hero">
                <label style="display:block; margin-bottom:10px; font-size: 0.9rem;">B√öSQUEDA DE EMPLEO POR CARGO:</label>
                <input type="text" id="targetJob" class="hero-input" placeholder="Ej. Administrador, Ingeniero..." onkeyup="saveConfig()">
            </div>

            <div class="section-header">Herramientas Pro</div>
            <div class="app-grid">
                <div class="app-card" onclick="openView('view-factura')">
                    <div class="icon">üìÑ</div>
                    <div class="title">Facturaci√≥n</div>
                </div>
                <div class="app-card" onclick="openView('view-crm')">
                    <div class="icon">üë•</div>
                    <div class="title">CRM Clientes</div>
                </div>
            </div>

            <div class="section-header">Servicios de Red</div>
            <div class="app-grid">
                <div class="app-card" onclick="go('https://mail.google.com/')"><div class="icon">üìß</div><div class="title">Gmail</div></div>
                <div class="app-card" onclick="go('https://web.whatsapp.com/')"><div class="icon">üü¢</div><div class="title">WhatsApp</div></div>
                <div class="app-card" onclick="go('https://www.google.com/')"><div class="icon">üåê</div><div class="title">Chrome</div></div>
                <div class="app-card" onclick="go('https://github.com/')"><div class="icon">üêô</div><div class="title">GitHub</div></div>
                <div class="app-card" onclick="go('https://www.canva.com/')"><div class="icon">üé®</div><div class="title">Canva</div></div>
                <div class="app-card" onclick="go('https://chatgpt.com/')"><div class="icon">ü§ñ</div><div class="title">ChatGPT</div></div>
            </div>

            <div class="section-header">B√∫squeda de Empleo</div>
            <div class="app-grid">
                <div class="app-card" onclick="searchJob('linkedin')"><div class="icon">üíº</div><div class="title">LinkedIn</div></div>
                <div class="app-card" onclick="searchJob('indeed')"><div class="icon">üîç</div><div class="title">Indeed</div></div>
                <div class="app-card" onclick="searchJob('occ')"><div class="icon">üî¥</div><div class="title">OCC</div></div>
            </div>
            
            <div class="section-header">Entretenimiento</div>
            <div class="app-grid">
                <div class="app-card" onclick="go('https://www.youtube.com/')"><div class="icon">üì∫</div><div class="title">YouTube</div></div>
                <div class="app-card" onclick="go('https://spotify.com/')"><div class="icon">üéµ</div><div class="title">Spotify</div></div>
                <div class="app-card" onclick="go('https://vix.com/')"><div class="icon">üé¨</div><div class="title">ViX</div></div>
            </div>
        </div>
    </div>

    <div id="view-factura" class="app-view">
        <div class="container">
            <button class="btn-back print-hidden" onclick="openView('main-menu')">‚Üê Volver</button>
            <h2 style="text-align:center">Generador de Cotizaci√≥n</h2>
            
            <div class="data-section">
                <div class="box">
                    <h3>Emisor (T√∫)</h3>
                    <input type="text" id="emiName" placeholder="Tu Nombre / Empresa" onkeyup="saveInv()">
                    <input type="text" id="emiRFC" placeholder="RFC" onkeyup="saveInv()">
                </div>
                <div class="box">
                    <h3>Cliente</h3>
                    <input type="text" id="cliName" placeholder="Nombre del Cliente" onkeyup="saveInv()">
                    <input type="date" id="docDate" onchange="saveInv()">
                </div>
            </div>

            <div class="box">
                <table id="invoiceTable">
                    <thead><tr><th>Concepto</th><th>Costo</th></tr></thead>
                    <tbody>
                        <tr><td><input type="text" id="it1" onkeyup="saveInv()"></td><td><input type="number" id="pr1" onkeyup="saveInv()"></td></tr>
                    </tbody>
                </table>
            </div>
            <button class="btn-back print-hidden" style="background:var(--accent); width:100%" onclick="window.print()">üñ®Ô∏è Generar PDF / Imprimir</button>
        </div>
    </div>

    <div id="view-crm" class="app-view">
        <div class="container">
            <button class="btn-back" onclick="openView('main-menu')">‚Üê Volver</button>
            <h2>CRM de Contactos</h2>
            <div class="box">
                <input type="text" id="crmName" placeholder="Nombre del contacto...">
                <input type="text" id="crmInfo" placeholder="Notas o Tel√©fono...">
                <button class="btn-back" style="background:green; width:100%" onclick="addCrm()">‚ûï Agregar a la Agenda</button>
            </div>
            <div id="crmList"></div>
        </div>
    </div>

    <script>
        // L√ìGICA DE NAVEGACI√ìN
        function openView(id) {
            document.querySelectorAll('.app-view').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function go(url) { window.open(url, '_blank'); }

        // PERSISTENCIA DE DATOS
        function saveConfig() { localStorage.setItem('cap_job', document.getElementById('targetJob').value); }
        document.getElementById('targetJob').value = localStorage.getItem('cap_job') || "";

        // B√öSQUEDA DE EMPLEO DIN√ÅMICA
        function searchJob(plat) {
            const query = document.getElementById('targetJob').value;
            let url = "";
            if(plat === 'linkedin') url = `https://www.linkedin.com/jobs/search/?keywords=${query}`;
            if(plat === 'indeed') url = `https://mx.indeed.com/jobs?q=${query}`;
            if(plat === 'occ') url = `https://www.occ.com.mx/empleos/de-${query}/`;
            window.open(url, '_blank');
        }

        // L√ìGICA CRM SIMPLE
        let contacts = JSON.parse(localStorage.getItem('cap_crm')) || [];
        function renderCrm() {
            const list = document.getElementById('crmList');
            list.innerHTML = "";
            contacts.forEach((c, i) => {
                list.innerHTML += `<div class="box"><strong>${c.name}</strong><br>${c.info} <br><button onclick="delCrm(${i})" style="color:red; background:none; border:none; cursor:pointer;">Eliminar</button></div>`;
            });
        }
        function addCrm() {
            const name = document.getElementById('crmName').value;
            const info = document.getElementById('crmInfo').value;
            if(name) {
                contacts.push({name, info});
                localStorage.setItem('cap_crm', JSON.stringify(contacts));
                renderCrm();
                document.getElementById('crmName').value = "";
                document.getElementById('crmInfo').value = "";
            }
        }
        function delCrm(i) { contacts.splice(i,1); localStorage.setItem('cap_crm', JSON.stringify(contacts)); renderCrm(); }
        renderCrm();

        // SERVICE WORKER PARA INSTALACI√ìN
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `self.addEventListener('fetch', function(event) {});`;
                const blob = new Blob([swCode], {type: 'application/javascript'});
                const url = URL.createObjectURL(blob);
                navigator.serviceWorker.register(url);
            });
        }
    </script>
</body>
</html>
